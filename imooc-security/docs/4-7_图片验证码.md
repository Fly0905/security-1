# 4-7 图片验证码

## 实现图形验证码功能

* 开发生成图形验证码接口
* 在认证流程中加入图形验证码校验
* 重构代码

## 生成图形验证码

* 根据随机数生成图片
* 将随机数存到 Session 中
* 将生成的图片写到接口的响应中


// 简单的表单登录，默认是http.httpBasic()
http.addFilterBefore(ValidateCodeFilter,UsernamePasswordAuthenticationFilter.class)
        .formLogin()
        .loginPage("signIn.html")
        .loginProcessingUrl("/自定义登录请求Url/XXX")
        .successHandler("成功处理处理器")
        .failureHandler("失败处理器")
        .and()
        .authorizeRequests()
        // signIn.html ,跳过身份认证
        .antMatchers("/authentication/require","signIn.html","/code/image").permitAll()
        .anyRequest()
        .authenticated()
        // Invalid CSRF Token临时解决，禁用csrf
        .and()
        .csrf().disable();
